<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visitor Hub - Bawi Eco Trail</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
</head>
<body>
    <header>
        <div class="header-seal">
            <img src="../Seal/Barangay_Bawi_Seal.png" alt="Barangay Bawi Seal">
            <span>Barangay Bawi</span>
        </div>
        <nav class="navbar">
            <a href="easter.html" id="navbar__logo">Bawi Eco Trail</a>
            <ul class="navbar__menu">
                <li class="navbar__item"><a class="navbar__links" href="index.html">Home</a></li>
                <li class="navbar__item"><a class="navbar__links" href="visitor-hub.html">Visitor Hub</a></li>
                <li class="navbar__item"><a class="navbar__links" href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="centered-content">
            <section>
                <div class="text-container">
                    <h2 class="section-heading">Operating Hours</h2>
                    <p>Everyday: 8:30 AM - 5:00 PM</p>
                    <p>Saturday and Sunday: 7:00 AM - 6:00 PM</p>
                    <h2 class="section-heading">Rules and Guidelines</h2>
                    <ul>
                        <li>Stay on designated trails.</li>
                        <li>No littering; please take your trash with you.</li>
                        <li>Respect wildlife and do not feed animals.</li>
                        <li>Follow all posted signs and instructions.</li>
                    </ul>
                </div>
            </section>
            
            <!-- QR Section -->
            <section>
                <div class="qr-section">
                    <h2>Payment</h2>
                    <img src="../QR/pricing-qr.png" alt="QR Code" class="qr-code">
                    <div class="price-summary">
                        <h3>Price</h3>
                        <p>Entrance Fee: ₱40.00 per head</p>
                        <p>Cottage Rental: ₱400.00 - ₱500.00</p>
                    </div>
                </div>
            </section>
            <section>
                <div class="weather-container">
                    <h2>7-Day Weather Forecast</h2>
                    <div id="weather-info" class="with-weekends"></div>
                </div>
            </section>

            <section>
                <div class="text-container">
                    <h2>Tourist Arrivals</h2>
                    <div class="stats-box">
                        <div class="stats-flex">
                            <div class="total-visitors">
                                <h3>Total Visitors: 32,108</h3>
                                <p>(April 2023 - March 2025)</p>
                            </div>
                            <div class="chart-container">
                                <canvas id="touristChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
                        <!-- Leaflet map container -->
                <div id="map" class="map-container"></div>
            </section>


    </main>
    <footer>
        <p class="website__rights">&copy; 2025 Bawi Eco Trail. All rights reserved.</p>
    </footer>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
    <script>
    const bawiEcoTrail = [13.8797, 121.2057];
    document.addEventListener('DOMContentLoaded', function() {
        const map = L.map('map').setView(bawiEcoTrail, 16);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        const destinationMarker = L.marker(bawiEcoTrail)
            .addTo(map)
            .bindPopup('Bawi Eco Trail<br>Padre Garcia, Batangas')
            .openPopup();

        // Get user's location and show route
        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(function(position) {
                const userLocation = [position.coords.latitude, position.coords.longitude];
                
                // Add marker for user's location
                L.marker(userLocation)
                    .addTo(map)
                    .bindPopup('Your Location')
                    .openPopup();

                // Create the routing control
                const routingControl = L.Routing.control({
                    waypoints: [
                        L.latLng(userLocation[0], userLocation[1]),
                        L.latLng(bawiEcoTrail[0], bawiEcoTrail[1])
                    ],
                    routeWhileDragging: true,
                    showAlternatives: true,
                    altLineOptions: {
                        styles: [
                            {color: 'black', opacity: 0.15, weight: 9},
                            {color: '#40676E', opacity: 0.8, weight: 6},
                            {color: '#FFF', opacity: 0.8, weight: 2}
                        ]
                    },
                    lineOptions: {
                        styles: [
                            {color: 'black', opacity: 0.15, weight: 9},
                            {color: '#4CAF50', opacity: 0.8, weight: 6},
                            {color: '#FFF', opacity: 0.8, weight: 2}
                        ]
                    }
                }).addTo(map);

                // Fit the map to show both points
                const bounds = L.latLngBounds(userLocation, bawiEcoTrail);
                map.fitBounds(bounds, { padding: [50, 50] });

            }, function(error) {
                console.error("Error getting location:", error);
                alert("Please enable location services to see the route to Bawi Eco Trail.");
            });
        } else {
            alert("Location services are not supported by your browser.");
        }
    });
    </script>
    <script src="js/main.js"></script>
    <script src="js/weather.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Tourist Arrivals Chart
        document.addEventListener('DOMContentLoaded', function() {
            const touristCtx = document.getElementById('touristChart').getContext('2d');
            new Chart(touristCtx, {
                type: 'line',
                data: {
                    labels: [
                        'Apr 2023', 'May 2023', 'Jun 2023', 'Jul 2023', 'Aug 2023',
                        'Oct 2024', 'Nov 2024', 'Dec 2024', 'Jan 2025', 'Feb 2025', 'Mar 2025'
                    ],
                    datasets: [{
                        label: 'Monthly Visitors',
                        data: [8188, 2659, 3912, 5361, 4664, 1091, 1091, 1555, 941, 1091, 1555],
                        fill: true,
                        backgroundColor: 'rgba(56, 142, 60, 0.2)', // Matches website green
                        borderColor: '#388E3C', // Matches website green
                        tension: 0.3,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        pointBackgroundColor: '#388E3C',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Monthly Tourist Arrivals',
                            color: '#333333',
                            font: {
                                size: 16,
                                weight: 'bold'
                            },
                            padding: 20
                        },
                        legend: {
                            labels: {
                                color: '#333333',
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(255, 255, 255, 0.9)',
                            titleColor: '#333333',
                            bodyColor: '#333333',
                            borderColor: '#388E3C',
                            borderWidth: 1,
                            padding: 10,
                            displayColors: true
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Visitors',
                                color: '#333333',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                color: '#333333',
                                font: {
                                    size: 11
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Month',
                                color: '#333333',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                color: '#333333',
                                font: {
                                    size: 11
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'nearest'
                    }
                }
            });
        });
    </script>
</body>
</html>
