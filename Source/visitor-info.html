<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visitor Information - Bawi Eco Trail</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
</head>
<body style="background: #FFF7EC; margin:0; min-height:100vh;">
    <header>
        <div style="display: flex; align-items: center;">
            <img src="../Seal/Barangay_Bawi_Seal.png" alt="Barangay Bawi Seal" style="height:56px;width:auto;vertical-align:middle;margin-right:16px;">
            <span style="font-size:2rem;font-weight:bold;color:#ffffff;">Barangay Bawi</span>
        </div>
        <nav class="navbar">
            <a href="index.html" id="navbar__logo">Bawi Eco Trail</a>
            <ul class="navbar__menu">
                <li class="navbar__item"><a class="navbar__links" href="index.html">Home</a></li>
                <li class="navbar__item"><a class="navbar__links" href="facilities-and-amenities.html">Facilities & Amenities</a></li>
                <li class="navbar__item"><a class="navbar__links" href="visitor-info.html">Visitor Info</a></li>
                <li class="navbar__item"><a class="navbar__links" href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="centered-content">
            <section>
                <div class="text-container">
                    <h2 style="margin-top: 30px;">Operating Hours</h2>
                    <p>Everyday: 6:30 AM - 5:00 PM</p>
                    <p>Saturday and Sunday: 7:00 AM - 6:00 PM</p>
                    <h2 style="margin-top: 30px;">Rules and Guidelines</h2>
                    <ul>
                        <li>Stay on designated trails.</li>
                        <li>No littering; please take your trash with you.</li>
                        <li>Respect wildlife and do not feed animals.</li>
                        <li>Follow all posted signs and instructions.</li>
                    </ul>
                </div>
            </section>
            
            <!-- QR Section -->
            <section>
                <div class="qr-section">
                    <h2>Payment</h2>
                    <img src="../QR.png" alt="QR Code" class="qr-code">
                    <div class="price-summary">
                        <h3>Price</h3>
                        <p>Entrance Fee: ₱40.00 per head</p>
                        <p>Cottage Rental: ₱400.00 - ₱500.00</p>
                    </div>
                </div>
            </section>
            <section>
                <div class="weather-container">
                    <h2>7-Day Weather Forecast</h2>
                    <div id="weather-info" class="with-weekends"></div>
                </div>
            </section>
        </div>
                        <!-- Leaflet map container -->
                <div id="map" style="width:100%;max-width:1200px;height:700px;border-radius:12px;box-shadow:0 2px 12px rgba(0,0,0,0.10);margin:32px auto 0 auto;position:relative;z-index:1;"></div>
            </section>

            <style>
                /* Override Leaflet control styles to stay within map bounds */
                .leaflet-control-container {
                    z-index: 1 !important;
                }
                .leaflet-routing-container {
                    z-index: 2 !important;
                    max-height: 500px;
                    overflow-y: auto;
                    margin-top: 10px !important;
                    background: rgba(255, 255, 255, 0.9) !important;
                }
                .leaflet-control {
                    z-index: 2 !important;
                }
            </style>
    </main>
    <footer>
        <div class="text-container">
            <p>&copy; 2025 Bawi Eco Trail. All rights reserved.</p>
        </div>
    </footer>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
    <script>
    const bawiEcoTrail = [13.8797, 121.2057];
    document.addEventListener('DOMContentLoaded', function() {
        const map = L.map('map').setView(bawiEcoTrail, 16);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        const destinationMarker = L.marker(bawiEcoTrail)
            .addTo(map)
            .bindPopup('Bawi Eco Trail<br>Padre Garcia, Batangas')
            .openPopup();

        // Get user's location and show route
        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(function(position) {
                const userLocation = [position.coords.latitude, position.coords.longitude];
                
                // Add marker for user's location
                L.marker(userLocation)
                    .addTo(map)
                    .bindPopup('Your Location')
                    .openPopup();

                // Create the routing control
                const routingControl = L.Routing.control({
                    waypoints: [
                        L.latLng(userLocation[0], userLocation[1]),
                        L.latLng(bawiEcoTrail[0], bawiEcoTrail[1])
                    ],
                    routeWhileDragging: true,
                    showAlternatives: true,
                    altLineOptions: {
                        styles: [
                            {color: 'black', opacity: 0.15, weight: 9},
                            {color: '#40676E', opacity: 0.8, weight: 6},
                            {color: '#FFF', opacity: 0.8, weight: 2}
                        ]
                    },
                    lineOptions: {
                        styles: [
                            {color: 'black', opacity: 0.15, weight: 9},
                            {color: '#4CAF50', opacity: 0.8, weight: 6},
                            {color: '#FFF', opacity: 0.8, weight: 2}
                        ]
                    }
                }).addTo(map);

                // Fit the map to show both points
                const bounds = L.latLngBounds(userLocation, bawiEcoTrail);
                map.fitBounds(bounds, { padding: [50, 50] });

            }, function(error) {
                console.error("Error getting location:", error);
                alert("Please enable location services to see the route to Bawi Eco Trail.");
            });
        } else {
            alert("Location services are not supported by your browser.");
        }
    });
    </script>
    <script src="js/main.js"></script>
    <script src="js/weather.js"></script>
</body>
</html>
